{% extends "base.html" %}
{% block title %}ã‚»ãƒ«ãƒ•ã‚±ã‚¢å‹•ç”»ç®¡ç† | KARiN.{% endblock %}

{% block content %}
<h2 class="admin-title">ğŸ¥ ã‚»ãƒ«ãƒ•ã‚±ã‚¢å‹•ç”»ç®¡ç†</h2>

{% if get_flashed_messages() %}
  {% for message in get_flashed_messages(with_categories=true) %}
    <div class="admin-alert admin-alert-{{ message[0] }}" style="margin-bottom: 20px; padding: 12px; border-radius: 8px; background: {% if message[0] == 'success' %}#d4edda{% else %}#f8d7da{% endif %}; color: {% if message[0] == 'success' %}#155724{% else %}#721c24{% endif %};">
      {{ message[1] }}
    </div>
  {% endfor %}
{% endif %}

<div style="margin-bottom: 24px;">
  <a href="/admin/videos/new" class="admin-blog-btn">ğŸ†• æ–°è¦å‹•ç”»ä½œæˆ</a>
</div>

{% if videos %}
<div class="admin-blog-grid">
  {% for video in videos %}
  <div class="admin-blog-card unread" style="padding: 20px; min-height: 160px;">
    <div class="admin-blog-head" style="margin-bottom: 12px;">
      <strong style="font-size: 1.1rem; color: #1E3A5F;">{{ video.item_name }}</strong>
    </div>
    
    {% if video.purpose %}
    <p style="margin-top: 0; margin-bottom: 12px; color: #666; font-size: 0.9rem; line-height: 1.5; min-height: 40px;">ç›®çš„: {{ video.purpose[:60] }}{% if video.purpose|length > 60 %}...{% endif %}</p>
    {% else %}
    <p style="margin-top: 0; margin-bottom: 12px; color: #999; font-size: 0.85rem; font-style: italic; min-height: 40px;">ç›®çš„æœªè¨­å®š</p>
    {% endif %}
    
    <div style="margin-top: auto; display: flex; gap: 8px; flex-wrap: wrap; padding-top: 12px; border-top: 1px solid #f0f0f0;">
      <a href="/admin/videos/{{ video.id }}" class="reply-btn" style="text-decoration: none; display: inline-block; padding: 8px 16px; border-radius: 6px; background: #1E3A5F; color: #fff; font-size: 0.9rem; transition: all 0.2s; border: none; cursor: pointer; flex: 1; text-align: center; min-width: 80px;" onmouseover="this.style.background='#16304A'; this.style.transform='translateY(-1px)'" onmouseout="this.style.background='#1E3A5F'; this.style.transform='translateY(0)'">ğŸ‘ è©³ç´°</a>
      <a href="/admin/videos/{{ video.id }}/edit" class="reply-btn" style="text-decoration: none; display: inline-block; padding: 8px 16px; border-radius: 6px; background: #1E3A5F; color: #fff; font-size: 0.9rem; transition: all 0.2s; border: none; cursor: pointer; flex: 1; text-align: center; min-width: 80px;" onmouseover="this.style.background='#16304A'; this.style.transform='translateY(-1px)'" onmouseout="this.style.background='#1E3A5F'; this.style.transform='translateY(0)'">âœ ç·¨é›†</a>
      <form action="/admin/videos/{{ video.id }}/delete" method="POST" style="display: inline; flex: 1; min-width: 80px;" onsubmit="return confirm('ã“ã®å‹•ç”»ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\nï¼ˆå…ƒã«ã¯æˆ»ã›ã¾ã›ã‚“ï¼‰');">
        <button type="submit" class="admin-blog-delete-btn" style="padding: 8px 16px; border-radius: 6px; font-size: 0.9rem; width: 100%; border: none; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.opacity='0.8'; this.style.transform='translateY(-1px)'" onmouseout="this.style.opacity='1'; this.style.transform='translateY(0)'">ğŸ—‘ å‰Šé™¤</button>
      </form>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p style="padding: 40px; text-align: center; color: #666; background: #f5f7fb; border-radius: 12px; margin-top: 20px;">å‹•ç”»ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ–°è¦å‹•ç”»ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</p>
{% endif %}

{% endblock %}


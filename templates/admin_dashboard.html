<!-- templates/admin_dashboard.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>KARiN. スタッフダッシュボード</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
  <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- 既存のCSSを読み込んでいるならここで読み込み -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dashboard.css') }}">
</head>
<body class="admin-page">

  <header class="admin-header">
    <div class="admin-header-left">
        <div class="admin-logo">KARiN. 管理ダッシュボード</div>
    </div>
    <div class="admin-header-right">
        <div class="admin-user">
        <a href="/staff/profile" class="admin-user-name">
            {{ staff_name }} さん
        </a>
        <a href="{{ url_for('staff_logout') }}" class="admin-logout-link">ログアウト</a>
        </div>
    </div>
  </header>

  <main class="admin-main">
    <h1 class="admin-title">スタッフ用ダッシュボード</h1>
    <p class="admin-subtitle">
      本日の業務状況とコンテンツ管理の入口です。まずは「未返信コメント」と「未返信お問い合わせ」を確認してください。
    </p>

    <div class="dashboard-grid">

      <!-- 🔵 上段：重要通知 -->
        <a href="/admin/comments" class="dash-card dash-card-top">
        <div class="dash-card-header">
            <span class="dash-card-label">未返信コメント</span>
            <span class="dash-card-badge{% if unreplied_comments and unreplied_comments > 0 %} dash-card-badge-alert{% endif %}">
            {{ unreplied_comments if unreplied_comments is not none else 0 }}件
            </span>
        </div>
        <p class="dash-card-text">
            ブログ記事についたコメントのうち、まだ返信していないものの件数です。
        </p>
        </a>

        {% if session.staff and session.staff.is_admin == True %}
        <a href="/admin/contacts" class="dash-card dash-card-top">
        <div class="dash-card-header">
            <span class="dash-card-label">未返信お問い合わせ</span>
            <span class="dash-card-badge{% if unprocessed_contacts and unprocessed_contacts > 0 %} dash-card-badge-alert{% else %} dash-card-badge-warning{% endif %}">
            {{ unprocessed_contacts if unprocessed_contacts is not none else 0 }}件
            </span>
        </div>
        <p class="dash-card-text">
            フォームから届いたお問い合わせのうち、未処理の件数です。
        </p>
        </a>
        {% endif %}


        <!-- 🔵 上段を2列で揃えるためのダミー（必要なければ削除） -->
        <div class="dash-card-placeholder"></div>

        <!-- 🔶 中段：コンテンツ管理 -->
        <a href="/admin/blogs" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">ブログ管理</span>
            </div>
            <p class="dash-card-text">
            ブログ記事の新規投稿・編集・削除を行います。
            </p>
        </a>

        <a href="/admin/videos" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">セルフケア動画（準備中）</span>
            </div>
            <p class="dash-card-text">
            今後、セルフケア動画のアップロード・管理を行う予定のページです。
            </p>
        </a>

        <a href="/admin/news" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">ニュース管理</span>
            </div>
            <p class="dash-card-text">
            お知らせ（ニュース）の投稿・編集・公開状態の管理を行います。
            </p>
        </a>

        <!-- 🟩 下段：業務管理 -->
        <a href="/admin/reservations" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">予約一覧</span>
            </div>
            <p class="dash-card-text">
            予約状況の確認・変更を行います。（Supabase / Sheets 連携予定）
            </p>
        </a>

        <a href="/admin/daily_reports" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">日報一覧</span>
            </div>
            <p class="dash-card-text">
            日報の一覧と詳細を確認します。
            </p>
        </a>

        <a href="/admin/reports" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">報告書一覧</span>
            </div>
            <p class="dash-card-text">
            トレーナー帯同などの報告書を管理します。
            </p>
        </a>

        <a href="/admin/karte" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">カルテ管理</span>
            </div>
            <p class="dash-card-text">
            初診フォームの内容と、継続施術ログを一元管理します。
            </p>
        </a>

        <a href="/admin/staff" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">スタッフ一覧</span>
            </div>
            <p class="dash-card-text">
            スタッフ情報、シフト、勤務報告などを管理するためのページです。（順次拡張予定）
            </p>
        </a>

        {% if session.staff and session.staff.is_admin == True %}
        <!-- 🔒 管理者専用：財務管理 -->
        <a href="/admin/invoices" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">請求書一覧</span>
            </div>
            <p class="dash-card-text">
            請求書の作成・管理・確認を行います。
            </p>
        </a>

        <a href="/admin/sales" class="dash-card">
            <div class="dash-card-header">
            <span class="dash-card-label">売上一覧</span>
            </div>
            <p class="dash-card-text">
            売上データの確認・分析を行います。
            </p>
        </a>
        {% endif %}

    </div><!-- /.dashboard-grid -->
    <div style="margin-top:40px; text-align:center;">
        <a href="{{ url_for('index') }}" class="home-btn">
            <img src="{{ url_for('static', filename='images/relogo.png') }}" alt="ホームへ戻る">
            <span>ホームに戻る</span>
        </a>
    </div>
  </main>
</body>
</html>

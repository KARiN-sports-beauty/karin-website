{% extends "base.html" %}
{% block title %}ãƒ‹ãƒ¥ãƒ¼ã‚¹ç·¨é›† | KARiN.{% endblock %}

{% block content %}
<h2 class="admin-title">âœ ãƒ‹ãƒ¥ãƒ¼ã‚¹ç·¨é›†</h2>

{% if get_flashed_messages() %}
  {% for message in get_flashed_messages(with_categories=true) %}
    <div class="admin-alert admin-alert-{{ message[0] }}" style="margin-bottom: 20px; padding: 12px; border-radius: 8px; background: {% if message[0] == 'success' %}#d4edda{% else %}#f8d7da{% endif %}; color: {% if message[0] == 'success' %}#155724{% else %}#721c24{% endif %};">
      {{ message[1] }}
    </div>
  {% endfor %}
{% endif %}

<form method="POST" action="/admin/news/edit/{{ news.id }}" style="max-width: 800px;">
  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #1E3A5F;">ã‚¿ã‚¤ãƒˆãƒ« <span style="color: #c65a3a;">*</span></label>
    <input type="text" name="title" value="{{ news.title }}" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
  </div>
  
  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #1E3A5F;">URLã‚¹ãƒ©ãƒƒã‚°ï¼ˆç©ºæ¬„ãªã‚‰è‡ªå‹•ç”Ÿæˆï¼‰</label>
    <input type="text" name="slug" value="{{ news.slug }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
  </div>
  
  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #1E3A5F;">å°å…¥æ–‡ï¼ˆmetaèª¬æ˜ï¼‰</label>
    <input type="text" name="excerpt" value="{{ news.excerpt or '' }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
  </div>
  
  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #1E3A5F;">ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒURL</label>
    <input type="text" name="image" value="{{ news.image or '' }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
  </div>
  
  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #1E3A5F;">ã‚«ãƒ†ã‚´ãƒª</label>
    <input type="text" name="category" value="{{ news.category or '' }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
  </div>
  
  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #1E3A5F;">ã‚¿ã‚°ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰</label>
    <input type="text" name="tags" value="{{ news.tags|join(', ') if news.tags else '' }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;">
  </div>
  
  <div style="margin-bottom: 20px;">
    <label style="display: flex; align-items: center; gap: 8px; font-weight: 600; color: #1E3A5F;">
      <input type="checkbox" name="draft" {% if news.draft %}checked{% endif %} style="width: 18px; height: 18px;">
      <span>éå…¬é–‹ï¼ˆä¸‹æ›¸ãï¼‰</span>
    </label>
  </div>
  
  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 6px; font-weight: 600; color: #1E3A5F;">æœ¬æ–‡ï¼ˆæ”¹è¡Œã¯è‡ªå‹•ã§&lt;br&gt;ã«å¤‰æ›ã•ã‚Œã¾ã™ï¼‰</label>
    <textarea name="body" rows="15" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; font-family: inherit;">{{ news.body.replace("<br>", "\n") if news.body else "" }}</textarea>
  </div>
  
  <div style="display: flex; gap: 12px; margin-top: 30px;">
    <button type="submit" class="admin-news-btn" style="border: none; cursor: pointer;">ğŸ’¾ æ›´æ–°</button>
    <a href="/admin/news" class="admin-news-btn-white" style="text-decoration: none; display: inline-block; text-align: center;">â† ä¸€è¦§ã«æˆ»ã‚‹</a>
    {% if news.slug %}
    <a href="/news/{{ news.slug }}" target="_blank" class="admin-news-btn-white" style="text-decoration: none; display: inline-block; text-align: center;">ğŸ”— è¡¨ç¤º</a>
    {% endif %}
  </div>
</form>

{% endblock %}

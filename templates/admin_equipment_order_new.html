{% extends "base.html" %}
{% block title %}ç™ºæ³¨å‚™å“ - æ–°è¦ä½œæˆ | KARiN.{% endblock %}

{% block content %}
<h2 class="admin-title">ğŸ“¦ ç™ºæ³¨å‚™å“ - æ–°è¦ä½œæˆï¼ˆ{{ year }}å¹´ï¼‰</h2>

{% if get_flashed_messages() %}
  {% for message in get_flashed_messages(with_categories=true) %}
    <div class="admin-alert admin-alert-{{ message[0] }}" style="margin-bottom: 20px; padding: 12px; border-radius: 8px; background: {% if message[0] == 'success' %}#d4edda{% else %}#f8d7da{% endif %}; color: {% if message[0] == 'success' %}#155724{% else %}#721c24{% endif %};">
      {{ message[1] }}
    </div>
  {% endfor %}
{% endif %}

<div style="margin-bottom: 20px;">
  <a href="/admin/equipment/years/{{ year }}" class="admin-karte-detail-btn-back" style="text-decoration: none;">â† {{ year }}å¹´ã®å‚™å“ç®¡ç†ã«æˆ»ã‚‹</a>
</div>

<form method="POST" action="/admin/equipment/years/{{ year }}/orders/new" style="max-width: 800px;">
  <div style="padding: 24px; background: #fff; border-radius: 18px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); margin-bottom: 20px;">
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #1E3A5F; font-size: 0.95rem;">ç™ºæ³¨æ—¥<span style="color: #f44336;">*</span></label>
      <input type="date" name="order_date" required value="{{ year }}-01-01" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box;">
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #1E3A5F; font-size: 0.95rem;">å‚™å“<span style="color: #f44336;">*</span></label>
      <select name="equipment_item_id" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box;">
        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
        {% for item in equipment_items %}
        <option value="{{ item.id }}">{{ item.name }}{% if item.unit %}ï¼ˆ{{ item.unit }}ï¼‰{% endif %}</option>
        {% endfor %}
      </select>
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #1E3A5F; font-size: 0.95rem;">æ•°é‡<span style="color: #f44336;">*</span></label>
      <input type="number" name="quantity" required min="1" value="1" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box;">
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #1E3A5F; font-size: 0.95rem;">é‡‘é¡</label>
      <input type="number" name="amount" min="0" step="0.01" placeholder="ä¾‹ï¼š10000" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box;">
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #1E3A5F; font-size: 0.95rem;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹<span style="color: #f44336;">*</span></label>
      <select name="status" required style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box;">
        <option value="pending">æœªç™ºæ³¨</option>
        <option value="ordered">ç™ºæ³¨æ¸ˆã¿</option>
        <option value="arrived">åˆ°ç€æ¸ˆã¿</option>
      </select>
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #1E3A5F; font-size: 0.95rem;">åˆ°ç€æ—¥</label>
      <input type="date" name="arrival_date" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box;">
      <small style="color: #666; font-size: 0.85rem;">åˆ°ç€æ¸ˆã¿ã®å ´åˆã«å…¥åŠ›ã—ã¦ãã ã•ã„</small>
    </div>
    
    <div style="margin-bottom: 20px;">
      <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #1E3A5F; font-size: 0.95rem;">ãƒ¡ãƒ¢</label>
      <textarea name="memo" rows="3" placeholder="ãƒ¡ãƒ¢ã‚’å…¥åŠ›" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box; font-family: inherit;"></textarea>
    </div>
    
    <div style="margin-top: 24px;">
      <button type="submit" class="admin-karte-detail-btn-primary" style="border: none; cursor: pointer; padding: 12px 24px; font-size: 1rem;">ç™»éŒ²</button>
      <a href="/admin/equipment/years/{{ year }}" class="admin-karte-detail-btn-back" style="text-decoration: none; margin-left: 12px; padding: 12px 24px; display: inline-block;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
    </div>
  </div>
</form>

{% endblock %}


{% extends "base.html" %}
{% block title %}åæ”¯ç®¡ç† - {{ year }}å¹´{{ month }}æœˆ çµ¦ä¸ | KARiN.{% endblock %}

{% block content %}
<h2 class="admin-title">ğŸ’° åæ”¯ç®¡ç† - {{ year }}å¹´{{ month }}æœˆ çµ¦ä¸</h2>

<div style="margin-bottom: 20px;">
  <a href="/admin/financial/years/{{ year }}/staff/{{ staff_id | urlencode }}" class="admin-karte-detail-btn-back" style="text-decoration: none;">â† æœˆä¸€è¦§ã«æˆ»ã‚‹</a>
</div>

<div style="padding: 24px; background: #fff; border-radius: 18px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); margin-bottom: 20px;">
  <h3 style="margin: 0 0 20px 0; font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">{{ staff_name }}</h3>

  {% if salary %}
  <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">åŸºæœ¬çµ¦</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary.base_salary|int) }}</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">æ­©åˆ</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary.commission|int) }}</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">æŒ‡åæ–™</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format((salary.nomination_fee or 0)|int) }}</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">äº¤é€šè²»</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary.transportation|int) }}</div>
    </div>
  </div>

  <div style="margin-top: 20px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
    <div style="padding: 16px; background: #e8f5e9; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">ç·æ”¯çµ¦</div>
      <div style="font-size: 1.3rem; font-weight: 600; color: #2e7d32;">Â¥{{ "{:,}".format(salary.total_salary|int) }}</div>
    </div>
    <div style="padding: 16px; background: #ffebee; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">æ§é™¤</div>
      <div style="font-size: 1.3rem; font-weight: 600; color: #c62828;">
        Â¥{{ "{:,}".format((salary.tax + salary.social_insurance + salary.other_deduction)|int) }}
      </div>
    </div>
    <div style="padding: 16px; background: #e8f5e9; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">æ‰‹å–ã‚Š</div>
      <div style="font-size: 1.3rem; font-weight: 600; color: #2e7d32;">Â¥{{ "{:,}".format(salary.net_salary|int) }}</div>
    </div>
  </div>
  {% elif salary_calc %}
  <div style="margin-bottom: 16px; font-size: 0.9rem; color: #666;">
    çµ¦ä¸ãŒæœªç™»éŒ²ã®ãŸã‚ã€è‡ªå‹•è¨ˆç®—çµæœã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚
  </div>
  <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">å®Ÿåƒæ™‚é–“</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">{{ salary_calc.working_hours|round(1) }}h</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">å£²ä¸Š</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary_calc.revenue|int) }}</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">åŸºæœ¬çµ¦</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary_calc.base_salary|int) }}</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">æ­©åˆ</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary_calc.commission|int) }}</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">æŒ‡åæ–™</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary_calc.nomination_fee|int) }}</div>
    </div>
    <div style="padding: 16px; background: #f5f7fb; border-radius: 10px;">
      <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">äº¤é€šè²»</div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1E3A5F;">Â¥{{ "{:,}".format(salary_calc.transportation|int) }}</div>
    </div>
  </div>
  <div style="margin-top: 20px; padding: 16px; background: #e8f5e9; border-radius: 10px;">
    <div style="font-size: 0.85rem; color: #666; margin-bottom: 6px;">ç·æ”¯çµ¦ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰</div>
    <div style="font-size: 1.3rem; font-weight: 600; color: #2e7d32;">Â¥{{ "{:,}".format(salary_calc.total_salary|int) }}</div>
  </div>
  {% else %}
  <p style="color: #999; font-size: 0.95rem;">çµ¦ä¸ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% endif %}
</div>

{% endblock %}
